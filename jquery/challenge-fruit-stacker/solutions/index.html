<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>Fruit Stacker</title>
    <script src="jquery.min.js"></script>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div id="stars"></div>
    <div id="stars2"></div>
    <div id="stars3"></div>
    <ul id="card">
      <li data-id="1" id="fruit-one">
        <img src="pineapple.svg" alt="" />
      </li>
      <li data-id="1" id="fruit-two">
        <img src="pineapple.svg" alt="" />
      </li>
      <li data-id="2" id="fruit-three">
        <img src="apple.svg" alt="" />
      </li>
      <li data-id="2" id="fruit-four">
        <img src="apple.svg" alt="" />
      </li>
      <li data-id="2" id="fruit-five">
        <img src="apple.svg" alt="" />
      </li>
      <li data-id="1" id="fruit-six">
        <img src="pineapple.svg" alt="" />
      </li>
      <li data-id="3" id="fruit-seven">
        <img src="avocado.svg" alt="" />
      </li>
      <li data-id="3" id="fruit-eight">
        <img src="avocado.svg" alt="" />
      </li>
      <li data-id="3" id="fruit-nine">
        <img src="avocado.svg" alt="" />
      </li>
      <li data-id="4" id="fruit-ten">
        <img src="grapes.svg" alt="" />
      </li>
      <li data-id="4" id="fruit-eleven">
        <img src="grapes.svg" alt="" />
      </li>
      <li data-id="4" id="fruit-twelve">
        <img src="grapes.svg" alt="" />
      </li>
    </ul>
    <div class="fixed">
      <div class="gradient-border" id="box"></div>
    </div>
    <script>
      let ids = [];

      $("#card li").on("click", function (e) {
        if ($("#box li").length >= 7) {
          return;
        }
        let clone = $(this).clone();
        $("#box").append(clone);

        let currentId = $(this).data("id");
        ids.push($(this).data("id"));

        let currentIdLen = ids.filter((id) => id == currentId)?.length;

        if (currentIdLen == 3) {
          ids = ids.filter((id) => id !== currentId);
          let three = $(`#box li[data-id=${currentId}]`);
          for (let index = 0; index < three.length; index++) {
            const element = three[index];
            $(element).addClass("active");
            setTimeout(() => {
              element.remove();
            }, 200);
          }
        }

        $(this).css({
          top: "600px",
          left: "200px",
          opacity: 0,
          transition:
            "left .2s linear, top .2s cubic-bezier(.08,-0.35,.99,.33),opacity .2s linear",
        });
      });
    </script>
  </body>
</html>
